<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>streamtools</title>
  <script src="js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="css/main.css">
  <script src="js/bootstrap.min.js"></script>

  <script type="text/javascript">
  function foo(response) {
    var data = response.data;
    var files = data.tree.filter(function(item) { return item.type == "blob" && item.path.indexOf(".json") >= 0 }); 
    $.each(files, function(i, pattern) {
      splitPath = pattern.path.split("/");
      row = "<tr><td>" + splitPath[1] + ": <a href=\"http://github.com/jacqui/streamtools-library/blob/master/" + pattern.path + "\">" + splitPath[2] + "</a></td></tr>";
      $("#patterns-list").append(row);
    });
  }

  var script = document.createElement('script');
  //script.src = 'https://api.github.com/repos/jacqui/streamtools-library/contents/patterns?callback=foo';
  script.src = 'https://api.github.com/repos/jacqui/streamtools-library/git/trees/master?recursive=1&callback=foo';

  document.getElementsByTagName('head')[0].appendChild(script);
  </script>
</head>
  
<body>
  <div class="jumbotron">
    <div class="container">
      <img class="logo-header" src="img/logo.png">
      <h1>streamtools library</h1>
      <p>a repository of patterns for working with data</p>
    </div>
  </div> <!--/jumbotron-->

  <div class="container-fluid intro">
    <div class="container">
      <div class="row">
        <table class="table">
          <tbody id="patterns-list">
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <br>
  <hr>
  <div class="container-fluid">
    <p class="centered footer">Streamtools is a product of the <a href="http://nytlabs.com/">New York Times R&D Lab</a>.</p>
  </div>
</body>
</html>
